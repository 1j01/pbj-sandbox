<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Point Based Physics 2D</title>
	<meta name="viewport" content="initial-scale=1, maximum-scale=1">
	<style>
		body,
		html {
			width: 100%;
			height: 100%;
			padding: 0;
			margin: 0;
			border: 0;
			overflow: hidden
		}

		kbd {
			border: 1px solid rgba(128, 128, 128, .8);
			border-radius: 3px;
			padding: 2px 5px;
		}

		button {
			margin: 2px;
			padding: 4px;
			vertical-align: bottom
		}

		h3 {
			margin-top: 8px;
			margin-bottom: 3px;
		}

		label {
			display: block;
		}

		label:not(:last-child) {
			margin-bottom: 3px;
		}

		.padded {
			padding: 5px;
			line-height: 1.8em;
		}

		.tools-window .window-content button {
			width: 200px;
		}

		input[type=number] {
			width: 50px;
		}

		.window-content {
			padding: 5px;
		}

		.window-content button {
			min-width: 100px;
			padding-left: 20px;
			padding-right: 20px;
		}

		/* TODO: this should be part of the os-gui.js library */
		input[type=text],
		input[type=number],
		input:not([type]) {
			border-image: var(--inset-deep-border-image);
			background: var(--Window);
			color: var(--WindowText);
		}

		/* for windows 98 theme where this wrapper isn't used, and thus doesn't have this */
		.select-wrapper {
			display: inline-block;
		}
	</style>
	<link rel="stylesheet" href="lib/os-gui/layout.css" />
	<link rel="stylesheet" href="lib/os-gui/windows-98.css" id="windows-98-theme" disabled />
	<!-- <link rel="stylesheet" href="lib/os-gui/windows-default.css" /> -->
	<link rel="stylesheet" href="gui-theme.css" id="dark-theme" />
	<link rel="icon" href="icon-47x47.png" type="image/png" />
	<script src="lib/jquery-3.6.0.slim.js"></script>
	<script src="lib/os-gui/$Window.js"></script>
	<script src="lib/arson.js"></script>
</head>

<body>
	<script>
		// Hack: There's no global window creation / close event in the os-gui library, yet.
		// This is just for animation on window creation / close.
		// Note that this makes it impossible to prevent windows from closing, as we always prevent it and then force it to close.
		let old_$Window = $Window;
		$Window = function (...args) {
			let $w = old_$Window(...args);
			if (window.windowTheme === "windows-98-theme") {
				return $w; // Windows 98 didn't have these animations!
			}
			$w.css({
				opacity: 0,
				transition: "none",
			});
			setTimeout(() => {
				$w.css({
					transition: "opacity 0.2s ease-in-out",
				});
				setTimeout(() => {
					$w.css({
						opacity: 1,
					});
				}, 0);
			}, 0);
			$w.on("close", (event) => {
				event.preventDefault();
				$w.addClass("closing");
				$w.css({
					transition: "opacity .3s ease-out, transform .3s ease-out",
					opacity: 0,
					transform: "scale(0.9)",
				});
				setTimeout(() => {
					// $w.remove();
					$w.close(true); // generates a "closed" event
				}, 5100);
			});
			return $w;
		};
	</script>

	<script src="main.js"></script>
</body>

</html>